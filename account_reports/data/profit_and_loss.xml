<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <record id="profit_and_loss" model="account.report">
        <field name="name">Profit and Loss</field>
        <field name="filter_analytic_groupby" eval="True"/>
        <field name="filter_unfold_all" eval="True"/>
        <field name="filter_journals" eval="True"/>
        <field name="filter_multi_company">selector</field>
        <field name="default_opening_date_filter">this_year</field>
        <field name="column_ids">
            <record id="profit_and_loss_column" model="account.report.column">
                <field name="name">Balance</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        
        <field name="line_ids">
	        <record id="account_financial_report_sales" model="account.report.line">
	            <field name="name">SALES</field>
	            <field name="code">SALES</field>
	            <field name="groupby">account_id</field>
	            <field name="foldable" eval="True"/>
	            <field name="expression_ids">
	                <record id="account_financial_report_income0_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">domain</field>
	                    <field name="formula" eval="[('account_id.account_type', '=', 'income')]"/>
	                    <field name="date_scope">normal</field>
	                    <field name="subformula">-sum</field>
	                </record>
	            </field>
	        </record>
	        
            <record id="account_financial_report_cor" model="account.report.line">
                <field name="name">Cost of Revenue</field>
                <field name="code">COR</field>
                <field name="expression_ids">
            		<record id="account_financial_report_cor_balance" model="account.report.expression">
                  		<field name="label">balance</field>
                  		<field name="engine">aggregation</field>
                  		<field name="formula">OPS.balance + PURC.balance - COST.balance</field>
                  		<field name="date_scope">normal</field>
           			</record>
        		</field>
           		<field name="children_ids">
   					<record id="account_financial_report_os" model="account.report.line">
	             		<field name="name">Opening Stock</field>
	             		<field name="code">OPS</field>
	             		<field name="groupby">account_id</field>
	             		<field name="foldable" eval="True"/>
       					<field name="expression_ids">
               				<record id="account_financial_report_os_balance" model="account.report.expression">
	                   			<field name="label">balance</field>
	                   			<field name="engine">domain</field>
	                   			<field name="formula" eval="[('account_id.id', 'in', (5005,5002,5003,5001))]"/>
	                   			<field name="date_scope">normal</field>
	                   			<field name="subformula">sum</field>
	                   			<field name="green_on_positive" eval="False"/>
	                   		</record>
                   		</field>
               		</record>
       				
       				<record id="account_financial_report_pur" model="account.report.line">
               			<field name="name">Purchases</field>
               			<field name="code">PURC</field>
               			<field name="groupby">account_id</field>
               			<field name="foldable" eval="True"/>
           				<field name="expression_ids">
                   			<record id="account_financial_report_pur_balance" model="account.report.expression">
                       			<field name="label">balance</field>
		                       	<field name="engine">domain</field>
		                       	<field name="formula" eval="[('account_id.account_type', '=', 'expense_purchase')]"/>
		                       	<field name="date_scope">normal</field>
		                       	<field name="subformula">sum</field>
		                       	<field name="green_on_positive" eval="False"/>
                   			</record>
           				</field>
       				</record>
       				
       				<record id="account_financial_report_cs" model="account.report.line">
               			<field name="name">Closing Stock</field>
		               	<field name="code">COST</field>
		               	<field name="groupby">account_id</field>
		               	<field name="foldable" eval="True"/>
           				<field name="expression_ids">
		                   <record id="account_financial_report_cs_balance" model="account.report.expression">
		                       <field name="label">balance</field>
		                       <field name="engine">domain</field>
		                       <field name="formula" eval="[('account_id.id', 'in', (5005,5002,5003,5001))]"/>
		                       <field name="date_scope">normal</field>
		                       <field name="subformula">sum</field>
		                       <field name="green_on_positive" eval="False"/>
		                   </record>
           				</field>
       				</record>
        		</field>
        	</record>
        	
        	<record id="account_financial_report_des" model="account.report.line">
	            <field name="name">Direct Expenses</field>
	            <field name="code">DES</field>
	            <field name="groupby">account_id</field>
	            <field name="foldable" eval="True"/>
	            <field name="expression_ids">
	                <record id="account_financial_report_des_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">domain</field>
	                    <field name="formula" eval="[('account_id.account_type', '=', 'expense_direct_cost')]"/>
	                    <field name="date_scope">normal</field>
	                    <field name="subformula">sum</field>
	                </record>
	            </field>
	        </record>
	        
	        <record id="account_financial_report_gp" model="account.report.line">
	            <field name="name">Gross Profit</field>
	            <field name="code">GP</field>
	            <field name="expression_ids">
	                <record id="account_financial_report_gp_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">aggregation</field>
	                    <field name="formula">SALES.balance - COR.balance - DES.balance</field>
	                    <field name="date_scope">normal</field>
	                </record>
               	</field>
	        </record>
	        
	        <record id="account_financial_report_otherinc" model="account.report.line">
	            <field name="name">Other Income</field>
	            <field name="code">OTHINC</field>
	            <field name="groupby">account_id</field>
	            <field name="foldable" eval="True"/>
	            <field name="expression_ids">
	                <record id="account_financial_report_otherinc_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">domain</field>
	                    <field name="formula" eval="[('account_id.account_type', '=', 'income_other')]"/>
	                    <field name="date_scope">normal</field>
	                    <field name="subformula">-sum</field>
	                </record>
	            </field>
	        </record>
	        
	        <record id="account_financial_report_indes" model="account.report.line">
	            <field name="name">Indirect Expenses</field>
	            <field name="code">INDES</field>
	            <field name="groupby">account_id</field>
	            <field name="foldable" eval="True"/>
	            <field name="expression_ids">
	                <record id="account_financial_report_indes_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">domain</field>
	                    <field name="formula" eval="[('account_id.account_type', '=', 'expense')]"/>
	                    <field name="date_scope">normal</field>
	                    <field name="subformula">sum</field>
	                </record>
	            </field>
	        </record>
	        
	        <record id="account_financial_report_dep" model="account.report.line">
	            <field name="name">Depreciation</field>
	            <field name="code">DEPEXP</field>
	            <field name="groupby">account_id</field>
	            <field name="foldable" eval="True"/>
	            <field name="expression_ids">
	                <record id="account_financial_report_dep_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">domain</field>
	                    <field name="formula" eval="[('account_id.account_type', '=', 'expense_depreciation')]"/>
	                    <field name="date_scope">normal</field>
	                    <field name="subformula">sum</field>
	                </record>
	            </field>
	        </record>
	        
	        <record id="account_financial_report_np" model="account.report.line">
	            <field name="name">Net Profit</field>
	            <field name="code">NP</field>
	            <field name="expression_ids">
	                <record id="account_financial_report_np_balance" model="account.report.expression">
	                    <field name="label">balance</field>
	                    <field name="engine">aggregation</field>
	                    <field name="formula">GP.balance + OTHINC.balance - INDES.balance - DEPEXP.balance</field>
	                    <field name="date_scope">normal</field>
	                </record>
               	</field>
	        </record>
	        
        </field>
    </record>    
</odoo>
